import{t as B,b as R,n as ce}from"../chunks/DC9zYTBi.js";import{i as ye}from"../chunks/CfEB1bgu.js";import{aj as we,C as be,I as j,h as O,aa as xe,D as Ee,c as k,T as K,F as ke,G as se,J as X,P as V,ad as Te,K as de,M as _e,O as Me,ax as Z,ah as ge,a6 as P,ay as Ce,m as F,az as ne,a8 as Ie,aA as Ae,aB as Le,ag as Re,aC as Se,ak as Ne,aD as Oe,aE as qe,ab as Fe,E as Be,aF as De,aG as He,aq as Ve,j as he,aH as ze,aI as Je,aJ as Ue,aK as Ye,a7 as Ge,n as z,a3 as ie,a4 as oe,a5 as Ke,aL as Pe,ar as Qe,z as C,B as A,A as T,e as I,x as Q,v as We,at as $e,y as je}from"../chunks/Br-Lvp4z.js";import{a as Xe,w as Ze,l as er,d as rr,s as D,e as ar}from"../chunks/BTQ8m3to.js";import{g as te,p as tr,i as J}from"../chunks/D0M1QHCf.js";import{r as sr}from"../chunks/B5zqRC9x.js";function nr(r,e,a,n){for(var i=[],l=e.length,v=0;v<l;v++)Le(e[v].e,i,!0);var h=l>0&&i.length===0&&a!==null;if(h){var b=a.parentNode;Re(b),b.append(a),n.clear(),q(r,e[0].prev,e[l-1].next)}Se(i,()=>{for(var p=0;p<l;p++){var t=e[p];h||(n.delete(t.k),q(r,t.prev,t.next)),Ne(t.e,!h)}})}function le(r,e,a,n,i,l=null){var v=r,h={flags:e,items:new Map,first:null};{var b=r;v=O?j(xe(b)):b.appendChild(we())}O&&Ee();var p=null,t=!1,y=K(()=>{var s=a();return Ie(s)?s:s==null?[]:ge(s)});be(()=>{var s=k(y),o=s.length;if(t&&o===0)return;t=o===0;let u=!1;if(O){var m=v.data===ke;m!==(o===0)&&(v=se(),j(v),X(!1),u=!0)}if(O){for(var w=null,c,_=0;_<o;_++){if(V.nodeType===8&&V.data===Te){v=V,u=!0,X(!1);break}var f=s[_],g=n(f,_);c=pe(V,h,w,null,f,g,_,i,e,a),h.items.set(g,c),w=c}o>0&&j(se())}O||ir(s,h,v,i,e,n,a),l!==null&&(o===0?p?de(p):p=_e(()=>l(v)):p!==null&&Me(p,()=>{p=null})),u&&X(!0),k(y)}),O&&(v=V)}function ir(r,e,a,n,i,l,v){var h=r.length,b=e.items,p=e.first,t=p,y,s=null,o=[],u=[],m,w,c,_;for(_=0;_<h;_+=1){if(m=r[_],w=l(m,_),c=b.get(w),c===void 0){var f=t?t.e.nodes_start:a;s=pe(f,e,s,s===null?e.first:s.next,m,w,_,n,i,v),b.set(w,s),o=[],u=[],t=s.next;continue}if(or(c,m,_),(c.e.f&Z)!==0&&de(c.e),c!==t){if(y!==void 0&&y.has(c)){if(o.length<u.length){var g=u[0],x;s=g.prev;var M=o[0],N=o[o.length-1];for(x=0;x<o.length;x+=1)ve(o[x],g,a);for(x=0;x<u.length;x+=1)y.delete(u[x]);q(e,M.prev,N.next),q(e,s,M),q(e,N,g),t=g,s=N,_-=1,o=[],u=[]}else y.delete(c),ve(c,t,a),q(e,c.prev,c.next),q(e,c,s===null?e.first:s.next),q(e,s,c),s=c;continue}for(o=[],u=[];t!==null&&t.k!==w;)(t.e.f&Z)===0&&(y??(y=new Set)).add(t),u.push(t),t=t.next;if(t===null)continue;c=t}o.push(c),s=c,t=c.next}if(t!==null||y!==void 0){for(var L=y===void 0?[]:ge(y);t!==null;)(t.e.f&Z)===0&&L.push(t),t=t.next;var d=L.length;if(d>0){var E=h===0?a:null;nr(e,L,E,b)}}P.first=e.first&&e.first.e,P.last=s&&s.e}function or(r,e,a,n){Ce(r.v,e),r.i=a}function pe(r,e,a,n,i,l,v,h,b,p){var t=(b&Oe)!==0,y=(b&qe)===0,s=t?y?F(i):ne(i):i,o=(b&Ae)===0?v:ne(v),u={i:o,v:s,k:l,a:null,e:null,prev:a,next:n};try{return u.e=_e(()=>h(r,s,o,p),O),u.e.prev=a&&a.e,u.e.next=n&&n.e,a===null?e.first=u:(a.next=u,a.e.next=u.e),n!==null&&(n.prev=u,n.e.prev=u.e),u}finally{}}function ve(r,e,a){for(var n=r.next?r.next.e.nodes_start:a,i=e?e.e.nodes_start:a,l=r.e.nodes_start;l!==n;){var v=Fe(l);i.before(l),l=v}}function q(r,e,a){e===null?r.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const lr=()=>performance.now(),S={tick:r=>requestAnimationFrame(r),now:()=>lr(),tasks:new Set};function me(){const r=S.now();S.tasks.forEach(e=>{e.c(r)||(S.tasks.delete(e),e.f())}),S.tasks.size!==0&&S.tick(me)}function vr(r){let e;return S.tasks.size===0&&S.tick(me),{promise:new Promise(a=>{S.tasks.add(e={c:r,f:a})}),abort(){S.tasks.delete(e)}}}function U(r,e){Ze(()=>{r.dispatchEvent(new CustomEvent(e))})}function fr(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function fe(r){const e={},a=r.split(";");for(const n of a){const[i,l]=n.split(":");if(!i||l===void 0)break;const v=fr(i.trim());e[v]=l.trim()}return e}const ur=r=>r;function Y(r,e,a,n){var i=(r&Je)!==0,l=(r&Ue)!==0,v=i&&l,h=(r&ze)!==0,b=v?"both":i?"in":"out",p,t=e.inert,y=e.style.overflow,s,o;function u(){var f=Ke,g=P;ie(null),oe(null);try{return p??(p=a()(e,(n==null?void 0:n())??{},{direction:b}))}finally{ie(f),oe(g)}}var m={is_global:h,in(){var f;if(e.inert=t,!i){o==null||o.abort(),(f=o==null?void 0:o.reset)==null||f.call(o);return}l||s==null||s.abort(),U(e,"introstart"),s=ae(e,u(),o,1,()=>{U(e,"introend"),s==null||s.abort(),s=p=void 0,e.style.overflow=y})},out(f){if(!l){f==null||f(),p=void 0;return}e.inert=!0,U(e,"outrostart"),o=ae(e,u(),s,0,()=>{U(e,"outroend"),f==null||f()})},stop:()=>{s==null||s.abort(),o==null||o.abort()}},w=P;if((w.transitions??(w.transitions=[])).push(m),i&&Xe){var c=h;if(!c){for(var _=w.parent;_&&(_.f&Be)!==0;)for(;(_=_.parent)&&(_.f&De)===0;);c=!_||(_.f&He)!==0}c&&Ve(()=>{he(()=>m.in())})}}function ae(r,e,a,n,i){var l=n===1;if(Ye(e)){var v,h=!1;return Ge(()=>{if(!h){var w=e({direction:l?"in":"out"});v=ae(r,w,a,n,i)}}),{abort:()=>{h=!0,v==null||v.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return i(),{abort:z,deactivate:z,reset:z,t:()=>n};const{delay:b=0,css:p,tick:t,easing:y=ur}=e;var s=[];if(l&&a===void 0&&(t&&t(0,1),p)){var o=fe(p(0,1));s.push(o,o)}var u=()=>1-n,m=r.animate(s,{duration:b});return m.onfinish=()=>{var w=(a==null?void 0:a.t())??1-n;a==null||a.abort();var c=n-w,_=e.duration*Math.abs(c),f=[];if(_>0){var g=!1;if(p)for(var x=Math.ceil(_/16.666666666666668),M=0;M<=x;M+=1){var N=w+c*y(M/x),L=fe(p(N,1-N));f.push(L),g||(g=L.overflow==="hidden")}g&&(r.style.overflow="hidden"),u=()=>{var d=m.currentTime;return w+c*y(d/_)},t&&vr(()=>{if(m.playState!=="running")return!1;var d=u();return t(d,1-d),!0})}m=r.animate(f,{duration:_,fill:"forwards"}),m.onfinish=()=>{u=()=>n,t==null||t(n,1-n),i()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=z)},deactivate:()=>{i=z},reset:()=>{n===0&&(t==null||t(1,0))},t:()=>u()}}function cr(r,e,a=e){var n=Pe();er(r,"input",i=>{var l=i?r.defaultValue:r.value;if(l=ee(r)?re(l):l,a(l),n&&l!==(l=e())){var v=r.selectionStart,h=r.selectionEnd;r.value=l??"",h!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(h,r.value.length))}}),(O&&r.defaultValue!==r.value||he(e)==null&&r.value)&&a(ee(r)?re(r.value):r.value),Qe(()=>{var i=e();ee(r)&&i===re(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function ee(r){var e=r.type;return e==="number"||e==="range"}function re(r){return r===""?null:+r}const dr=()=>"Live Logs",_r=()=>"Registros en vivo",gr=(r={},e={})=>{const a=e.locale??te();return a==="en"?dr():a==="es"?_r():"live_logs"},hr=()=>"Run",pr=()=>"Ejecutar",mr=(r={},e={})=>{const a=e.locale??te();return a==="en"?hr():a==="es"?pr():"run_query"},yr=()=>"Query Logs",wr=()=>"Buscar registros",br=(r={},e={})=>{const a=e.locale??te();return a==="en"?yr():a==="es"?wr():"query_logs"};function xr(r,e){I(e,!k(e))}function Er(r,e,a){k(e)?a():I(e,!0)}var kr=B('<span class="relative text-xs text-green-400">Copied</span>'),Tr=ce('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"></path></svg>'),Mr=ce('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"></path></svg>'),Cr=B("<pre> </pre>"),Ir=B("<pre> </pre>"),Ar=B('<div class="flex items-center gap-1 rounded bg-gray-800 p-2 font-mono text-sm whitespace-pre-wrap transition-all hover:bg-gray-700"><div class="order-last flex self-start"><!> <button aria-label="copy"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"></path></svg></button> <button aria-label="toggle"><!></button></div> <div class="flex-grow truncate" aria-label="expand"><!></div></div>');function ue(r,e){let a=tr(e,"log",8),n=F(!1),i=F(!1);async function l(){const f=JSON.stringify(a());try{await navigator.clipboard.writeText(f),I(i,!0),setTimeout(()=>I(i,!1),1e3)}catch(g){console.error("Failed to copy:",g)}}var v=Ar(),h=C(v),b=C(h);{var p=f=>{var g=kr();R(f,g)};J(b,f=>{k(i)&&f(p)})}var t=A(b,2);t.__click=l;var y=A(t,2);y.__click=[xr,n];var s=C(y);{var o=f=>{var g=Tr();R(f,g)},u=f=>{var g=Mr();R(f,g)};J(s,f=>{k(n)?f(u,!1):f(o)})}T(y),T(h);var m=A(h,2);m.__click=[Er,n,l];var w=C(m);{var c=f=>{var g=Cr(),x=C(g,!0);T(g),Q(M=>D(x,M),[()=>JSON.stringify(a(),null,2)],K),R(f,g)},_=f=>{var g=Ir(),x=C(g,!0);T(g),Q(M=>D(x,M),[()=>JSON.stringify(a())],K),R(f,g)};J(w,f=>{k(n)?f(c):f(_,!1)})}T(m),T(v),R(r,v)}rr(["click"]);const Lr=r=>r;function G(r,{delay:e=0,duration:a=400,easing:n=Lr}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:a,easing:n,css:l=>`opacity: ${l*i}`}}var Rr=B('<div class="rounded border border-red-500 bg-red-900/30 p-2 text-sm text-red-400"><b>Error:</b> </div>'),Sr=B('<div class="rounded border border-green-500 bg-green-900/30 p-2 text-sm text-green-400">Query successful</div>'),Nr=B('<div class="grid grid-cols-1 gap-6 lg:grid-cols-2"><div class="space-y-4"><h2 class="mt-4 text-xl font-bold"> </h2> <input class="w-full rounded border border-gray-600 bg-gray-800 p-2" placeholder="SELECT * FROM logs ORDER BY timestamp DESC LIMIT 100"> <div class="space-between flex gap-1"><button class="h-fit rounded bg-blue-600 px-4 py-2 hover:bg-blue-500"> </button> <!></div> <div class="space-y-2 lg:max-h-[75vh] lg:overflow-y-auto"></div></div> <div><h2 class="mb-4 text-xl font-bold"> </h2> <div class="space-y-2 lg:max-h-[90vh] lg:overflow-y-auto"></div></div></div>');function Vr(r,e){We(e,!1);let a=F("SELECT * FROM logs ORDER BY timestamp DESC LIMIT 10"),n=F([]),i=F([]),l,v=F(null),h=F(!1);async function b(){I(v,null);try{const d=await fetch(`/query?q=${encodeURIComponent(k(a))}`);if(!d.ok){const E=await d.text();throw new Error(E||"Unknown error")}I(n,await d.json()),setTimeout(()=>{I(h,!0),setTimeout(()=>I(h,!1),2500)},100)}catch(d){I(v,d.message)}}$e(()=>{l=new WebSocket(`ws://${location.host}/ws`),l.onmessage=d=>{I(i,[JSON.parse(d.data),...k(i)].slice(0,500))}}),ye();var p=Nr(),t=C(p),y=C(t),s=C(y,!0);T(y);var o=A(y,2);sr(o);var u=A(o,2),m=C(u),w=C(m,!0);T(m);var c=A(m,2);{var _=d=>{var E=Rr(),H=A(C(E));T(E),Q(()=>D(H,` ${k(v)??""}`)),Y(1,E,()=>G,()=>({duration:300})),Y(2,E,()=>G,()=>({duration:100})),R(d,E)},f=(d,E)=>{{var H=W=>{var $=Sr();Y(1,$,()=>G,()=>({duration:300})),Y(2,$,()=>G,()=>({duration:200})),R(W,$)};J(d,W=>{k(h)&&W(H)},E)}};J(c,d=>{k(v)?d(_):d(f,!1)})}T(u);var g=A(u,2);le(g,5,()=>k(n),d=>d,(d,E)=>{ue(d,{get log(){return k(E)}})}),T(g),T(t);var x=A(t,2),M=C(x),N=C(M,!0);T(M);var L=A(M,2);le(L,5,()=>k(i),d=>d,(d,E)=>{ue(d,{get log(){return k(E)}})}),T(L),T(x),T(p),Q((d,E,H)=>{D(s,d),D(w,E),D(N,H)},[()=>br(),()=>mr(),()=>gr()],K),cr(o,()=>k(a),d=>I(a,d)),ar("click",m,b),R(r,p),je()}export{Vr as component};
