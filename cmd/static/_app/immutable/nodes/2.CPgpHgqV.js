import{t as V,a as N}from"../chunks/Bye5RoYx.js";import{i as se}from"../chunks/Cw9Iuf2o.js";import{n as ne,w as E,y as le,g as b,z as U,H as te,A as B,B as J,C as w,x as T,D as fe,F as z,o as Z,G as ue,I as R,J as j,K as Q,L as oe,M as I,N as $,O as ve,P as ie,Q as ce,R as de,v as _e,S as he,T as me,U as ge,V as ye,W as be,X as Ee,Y as pe,Z as xe,b as Te,_ as Se,p as Ae,j as Ie,k as L,$ as C,s as O,m as D,t as F}from"../chunks/DuaBda6M.js";import{a as ke,l as Me,e as Ne,s as G}from"../chunks/48O4Hc6w.js";import{o as we}from"../chunks/D0CJ6H1w.js";function K(e,a){return a}function Re(e,a,r,u){for(var l=[],f=a.length,v=0;v<f;v++)ie(a[v].e,l,!0);var _=f>0&&l.length===0&&r!==null;if(_){var i=r.parentNode;ce(i),i.append(r),u.clear(),x(e,a[0].prev,a[f-1].next)}de(l,()=>{for(var h=0;h<f;h++){var n=a[h];_||(u.delete(n.k),x(e,n.prev,n.next)),_e(n.e,!_)}})}function P(e,a,r,u,l,f=null){var v=e,_={flags:a,items:new Map,first:null};E&&le();var i=null,h=!1,n=U(()=>{var c=r();return ye(c)?c:c==null?[]:j(c)});ne(()=>{var c=b(n),s=c.length;if(h&&s===0)return;h=s===0;let d=!1;if(E){var t=v.data===te;t!==(s===0)&&(v=B(),J(v),w(!1),d=!0)}if(E){for(var g=null,m,o=0;o<s;o++){if(T.nodeType===8&&T.data===fe){v=T,d=!0,w(!1);break}var y=c[o],S=u(y,o);m=ee(T,_,g,null,y,S,o,l,a,r),_.items.set(S,m),g=m}s>0&&J(B())}E||Le(c,_,v,l,a,u,r),f!==null&&(s===0?i?z(i):i=Z(()=>f(v)):i!==null&&ue(i,()=>{i=null})),d&&w(!0),b(n)}),E&&(v=T)}function Le(e,a,r,u,l,f,v){var _=e.length,i=a.items,h=a.first,n=h,c,s=null,d=[],t=[],g,m,o,y;for(y=0;y<_;y+=1){if(g=e[y],m=f(g,y),o=i.get(m),o===void 0){var S=n?n.e.nodes_start:r;s=ee(S,a,s,s===null?a.first:s.next,g,m,y,u,l,v),i.set(m,s),d=[],t=[],n=s.next;continue}if(Ce(o,g,y),(o.e.f&R)!==0&&z(o.e),o!==n){if(c!==void 0&&c.has(o)){if(d.length<t.length){var A=t[0],p;s=A.prev;var Y=d[0],k=d[d.length-1];for(p=0;p<d.length;p+=1)W(d[p],A,r);for(p=0;p<t.length;p+=1)c.delete(t[p]);x(a,Y.prev,k.next),x(a,s,Y),x(a,k,A),n=A,s=k,y-=1,d=[],t=[]}else c.delete(o),W(o,n,r),x(a,o.prev,o.next),x(a,o,s===null?a.first:s.next),x(a,s,o),s=o;continue}for(d=[],t=[];n!==null&&n.k!==m;)(n.e.f&R)===0&&(c??(c=new Set)).add(n),t.push(n),n=n.next;if(n===null)continue;o=n}d.push(o),s=o,n=o.next}if(n!==null||c!==void 0){for(var M=c===void 0?[]:j(c);n!==null;)(n.e.f&R)===0&&M.push(n),n=n.next;var ae=M.length;if(ae>0){var re=null;Re(a,M,re,i)}}Q.first=a.first&&a.first.e,Q.last=s&&s.e}function Ce(e,a,r,u){oe(e.v,a),e.i=r}function ee(e,a,r,u,l,f,v,_,i,h){var n=(i&he)!==0,c=(i&me)===0,s=n?c?I(l):$(l):l,d=(i&ve)===0?v:$(v),t={i:d,v:s,k:f,a:null,e:null,prev:r,next:u};try{return t.e=Z(()=>_(e,s,d,h),E),t.e.prev=r&&r.e,t.e.next=u&&u.e,r===null?a.first=t:(r.next=t,r.e.next=t.e),u!==null&&(u.prev=t,u.e.prev=t.e),t}finally{}}function W(e,a,r){for(var u=e.next?e.next.e.nodes_start:r,l=a?a.e.nodes_start:r,f=e.e.nodes_start;f!==u;){var v=ge(f);l.before(f),f=v}}function x(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const Oe=Symbol("is custom element"),De=Symbol("is html");function He(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var u=e.value;X(e,"value",null),e.value=u}if(e.hasAttribute("checked")){var l=e.checked;X(e,"checked",null),e.checked=l}}};e.__on_r=r,be(r),ke()}}function X(e,a,r,u){var l=qe(e);E&&(l[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||l[a]!==(l[a]=r)&&(a==="loading"&&(e[Ee]=r),e.removeAttribute(a))}function qe(e){return e.__attributes??(e.__attributes={[Oe]:e.nodeName.includes("-"),[De]:e.namespaceURI===pe})}function Ue(e,a,r=a){var u=xe();Me(e,"input",l=>{var f=l?e.defaultValue:e.value;if(f=H(e)?q(f):f,r(f),u&&f!==(f=a())){var v=e.selectionStart,_=e.selectionEnd;e.value=f??"",_!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(_,e.value.length))}}),(E&&e.defaultValue!==e.value||Te(a)==null&&e.value)&&r(H(e)?q(e.value):e.value),Se(()=>{var l=a();H(e)&&l===q(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function H(e){var a=e.type;return a==="number"||a==="range"}function q(e){return e===""?null:+e}var Ve=V('<pre class="text-sm bg-gray-800 p-2 rounded mb-1"> </pre>'),Ye=V('<pre class="text-sm bg-gray-700 p-2 rounded mb-1"> </pre>'),Be=V('<div class="space-y-4"><input class="w-full p-2 bg-gray-800 border border-gray-600 rounded"> <button class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-500">Run Query</button> <h2 class="text-xl font-bold">Live Logs</h2> <!> <h2 class="text-xl font-bold mt-6">Query Results</h2> <!></div>');function Ke(e,a){Ae(a,!1);let r=I("SELECT * FROM logs ORDER BY timestamp DESC LIMIT 100"),u=I([]),l=I([]),f;const v=async()=>{const s=await fetch(`/query?q=${encodeURIComponent(b(r))}`);C(u,await s.json())};we(()=>{f=new WebSocket(`ws://${location.host}/ws`),f.onmessage=s=>{C(l,[JSON.parse(s.data),...b(l)].slice(0,100))}}),se();var _=Be(),i=L(_);He(i);var h=O(i,2),n=O(h,4);P(n,1,()=>b(l),K,(s,d)=>{var t=Ve(),g=L(t,!0);D(t),F(m=>G(g,m),[()=>JSON.stringify(b(d),null,2)],U),N(s,t)});var c=O(n,4);P(c,1,()=>b(u),K,(s,d)=>{var t=Ye(),g=L(t,!0);D(t),F(m=>G(g,m),[()=>JSON.stringify(b(d),null,2)],U),N(s,t)}),D(_),Ue(i,()=>b(r),s=>C(r,s)),Ne("click",h,v),N(e,_),Ie()}export{Ke as component};
